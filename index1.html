<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O-Cell Store</title>
    <style>
        * { box-sizing: border-box; }
        body { 
            background: linear-gradient(45deg, #020024 0%, #090979 35%, #00d4ff 100%); 
            background-size: 400% 400%; animation: bgMove 15s infinite;
            color: white; font-family: sans-serif; margin: 0; min-height: 100vh;
        }
        @keyframes bgMove { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
        
        header { padding: 40px 20px; text-align: center; background: rgba(0,0,0,0.2); backdrop-filter: blur(5px); }
        h1 { color: #00d4ff; font-size: 3rem; margin: 0; text-shadow: 0 0 15px rgba(0,212,255,0.5); }
        
        .cats-bar { display: flex; overflow-x: auto; gap: 10px; padding: 20px; justify-content: center; }
        .cat-tag { background: rgba(255,255,255,0.1); border: 1px solid #00d4ff; color: white; padding: 8px 20px; border-radius: 20px; cursor: pointer; white-space: nowrap; transition: 0.3s; }
        .cat-tag:hover, .cat-tag.active { background: #00d4ff; color: #020024; font-weight: bold; }

        .store-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(170px, 1fr)); gap: 20px; padding: 20px; }
        .item-card { background: rgba(255,255,255,0.05); border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); overflow: hidden; text-align: center; animation: fadeInUp 0.8s ease; }
        .item-card img { width: 100%; height: 160px; object-fit: cover; }
        .item-info { padding: 15px; }
        .item-price { color: #00d4ff; font-size: 22px; font-weight: bold; margin: 10px 0; }
        .wa-btn { background: #25d366; color: white; text-decoration: none; display: block; padding: 12px; border-radius: 8px; font-weight: bold; transition: 0.3s; }
        .wa-btn:hover { transform: scale(1.05); background: #1ebd5b; }
        .sold-out { background: #666; cursor: not-allowed; }

        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<header>
    <h1>O-CELL STORE</h1>
    <p>الجودة والتميز في كل قطعة</p>
</header>

<div class="cats-bar" id="catMenu">
    <div class="cat-tag active" onclick="filter('all')">الكل</div>
</div>

<div class="store-grid" id="mainStore"></div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCnzm7b0mEiszDck9d_KvOfVMN2WguQs8w",
        authDomain: "o-cell-8bd7f.firebaseapp.com",
        projectId: "o-cell-8bd7f",
        storageBucket: "o-cell-8bd7f.firebasestorage.app",
        messagingSenderId: "123702658364",
        appId: "1:123702658364:web:f51ca179843af7bab24a39",
        measurementId: "G-9G5Y056X75"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const PHONE = "96178961175"; // رقم الواتساب الخاص بك

    async function start() {
        // تحميل الأقسام
        const cSnap = await getDocs(collection(db, "categories"));
        const menu = document.getElementById('catMenu');
        cSnap.forEach(d => {
            menu.innerHTML += `<div class="cat-tag" onclick="filter('${d.data().name}')">${d.data().name}</div>`;
        });

        // تحميل البضاعة
        const pSnap = await getDocs(collection(db, "products"));
        const store = document.getElementById('mainStore');
        pSnap.forEach(d => {
            const p = d.data();
            const msg = encodeURIComponent(`مرحباً O-Cell، أود طلب: ${p.name} بسعر $${p.price}`);
            store.innerHTML += `
                <div class="item-card" data-category="${p.category}">
                    <img src="${p.image}">
                    <div class="item-info">
                        <h3>${p.name}</h3>
                        <div class="item-price">$${p.price}</div>
                        ${p.inStock ? 
                            `<a href="https://wa.me/${PHONE}?text=${msg}" class="wa-btn">Order Now <i class="fab fa-whatsapp"></i></a>` : 
                            `<div class="wa-btn sold-out">نفذت الكمية</div>`}
                    </div>
                </div>`;
        });
    }

    window.filter = (c) => {
        document.querySelectorAll('.item-card').forEach(card => {
            card.style.display = (c === 'all' || card.getAttribute('data-category') === c) ? 'block' : 'none';
        });
        document.querySelectorAll('.cat-tag').forEach(t => t.classList.toggle('active', t.innerText === c || (c === 'all' && t.innerText === 'الكل')));
    };

    start();
</script>
</body>
</html>

