<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <style>
        body { font-family: sans-serif; padding: 20px; }
        table { width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        th, td { padding: 15px; text-align: right; border-bottom: 1px solid #eee; }
        th { background: #1a1a2e; color: white; }
        .btn-biz { background: #27ae60; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; }
        .btn-user { background: #3498db; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>ðŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø²Ø¨Ø§Ø¦Ù†</h1>
    <table>
        <thead>
            <tr><th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th><th>Ø§Ù„Ù†ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ</th><th>ØªØºÙŠÙŠØ± Ø§Ù„Ø±ØªØ¨Ø©</th></tr>
        </thead>
        <tbody id="user-table"></tbody>
    </table>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getFirestore, collection, getDocs, doc, updateDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

    const firebaseConfig = { /* ÙƒÙˆØ¯ Ø§Ù„Ø±Ø¨Ø· Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ */ };
    const db = getFirestore(initializeApp(firebaseConfig));

    async function load() {
        const snap = await getDocs(collection(db, "users"));
        const table = document.getElementById('user-table');
        table.innerHTML = "";
        snap.forEach(d => {
            const u = d.data();
            const role = u.role || 'Ø¹Ø§Ø¯ÙŠ';
            table.innerHTML += `
                <tr>
                    <td>${u.email}</td>
                    <td><b>${role}</b></td>
                    <td><button class="${role === 'business' ? 'btn-user' : 'btn-biz'}" onclick="window.updateRole('${d.id}', '${role}')">
                        ${role === 'business' ? 'ØªØ­ÙˆÙŠÙ„ Ù„Ø¹Ø§Ø¯ÙŠ' : 'ØªØ±Ù‚ÙŠØ© Ù„Ù€ Business'}
                    </button></td>
                </tr>`;
        });
    }

    window.updateRole = async (id, currentRole) => {
        const newRole = currentRole === 'business' ? 'user' : 'business';
        await updateDoc(doc(db, "users", id), { role: newRole });
        alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØªØ¨Ø©!");
        load();
    };
    load();
</script>
</body>
</html>

