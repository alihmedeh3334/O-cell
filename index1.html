<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O-Cell Store | Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø±Ø³Ù…ÙŠ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --dark: #020024; --accent: #00d4ff; --green: #25d366; }
        body { 
            background: linear-gradient(-45deg, #020024, #090979, #050530, #020024); 
            background-size: 400% 400%; animation: gradientBG 15s ease infinite;
            color: white; font-family: 'Segoe UI', Tahoma, sans-serif; margin: 0; overflow-x: hidden; 
        }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        /* Navigation */
        .sticky-nav { 
            background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(12px); 
            padding: 12px; text-align: center; position: sticky; top: 0; z-index: 2000;
            border-bottom: 1px solid var(--accent); box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }
        .sticky-nav a { color: var(--accent); text-decoration: none; font-size: 13px; transition: 0.3s; margin: 0 5px; }
        .sticky-nav a:hover { text-shadow: 0 0 10px var(--accent); }

        /* Hero */
        .hero-box { 
            height: 60vh; display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; animation: zoomIn 1.5s ease;
        }
        .hero-box h1 { font-size: 4rem; margin: 0; background: linear-gradient(to right, #fff, var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 0 15px rgba(0,212,255,0.4)); }
        .delivery-pill { background: #e94560; padding: 6px 20px; border-radius: 30px; font-size: 14px; margin-top: 15px; box-shadow: 0 5px 15px rgba(233,69,96,0.4); }

        /* Layout */
        .container { padding: 30px 15px; max-width: 1200px; margin: auto; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 20px; }
        .card { 
            background: rgba(255,255,255,0.03); border-radius: 20px; border: 1px solid rgba(0, 212, 255, 0.1); 
            overflow: hidden; transition: 0.4s; cursor: pointer; position: relative; animation: slideUp 0.8s ease;
        }
        .card:hover { transform: translateY(-10px) scale(1.02); border-color: var(--accent); box-shadow: 0 15px 30px rgba(0,0,0,0.4); }
        .card img { width: 100%; height: 160px; object-fit: cover; }
        .card-info { padding: 15px; text-align: center; }
        .price-tag { color: var(--accent); font-size: 1.3rem; font-weight: 900; }
        .sold-out-badge { position: absolute; top: 12px; right: 12px; background: rgba(233, 69, 96, 0.95); padding: 4px 12px; border-radius: 8px; font-size: 11px; font-weight: bold; }

        /* Modal Details */
        .modal-overlay { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.96); z-index: 3000; justify-content: center; align-items: center; padding: 20px;
        }
        .modal-box { 
            background: #090979; width: 100%; max-width: 420px; padding: 30px; border-radius: 30px; 
            text-align: center; border: 1px solid var(--accent); animation: modalBounce 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .modal-box img { width: 100%; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.3); }
        .order-wa-btn { background: var(--green); color: white; display: block; padding: 16px; border-radius: 15px; text-decoration: none; font-weight: bold; margin-top: 25px; transition: 0.3s; font-size: 1.1rem; }
        .order-wa-btn:hover { transform: scale(1.05); filter: brightness(1.1); }
        .disabled-btn { background: #475569; pointer-events: none; opacity: 0.7; }

        /* Animations */
        @keyframes zoomIn { from { opacity: 0; transform: scale(1.1); } to { opacity: 1; transform: scale(1); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes modalBounce { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body>

<div class="sticky-nav">
    <a href="tel:78961175"><i class="fas fa-phone"></i> Ø§ØªØµÙ„ Ø¨Ù†Ø§: 78961175</a> | 
    <a href="https://maps.app.goo.gl/EJoXedJGapY6u3jKA" target="_blank"><i class="fas fa-map-marker-alt"></i> Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: Ø§Ù„Ù…Ø´Ø±ÙÙŠØ©ØŒ Ø¨ÙŠØ±ÙˆØª</a>
</div>

<div id="home-screen">
    <div class="hero-box">
        <h1>O-CELL STORE</h1>
        <p style="letter-spacing: 3px; opacity: 0.8;">Quality Above All</p>
        <div class="delivery-pill">ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù„Ø¨Ù†Ø§Ù†ÙŠØ© ğŸ‡±ğŸ‡§ğŸšš</div>
    </div>
    <div class="container">
        <h2 style="color: var(--accent); margin-bottom: 30px;"><i class="fas fa-th-large"></i> ØªØµÙØ­ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</h2>
        <div class="grid" id="categoryGrid"></div>
    </div>
</div>

<div id="product-screen" style="display:none;" class="container">
    <button onclick="goBack()" style="background:none; color:var(--accent); border:1px solid var(--accent); padding:10px 25px; border-radius:50px; margin-bottom:30px; cursor:pointer; font-weight:bold;">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ù‚Ø³Ø§Ù…</button>
    <div class="grid" id="productGrid"></div>
</div>

<div id="modal" class="modal-overlay" onclick="if(event.target==this) closeM()">
    <div class="modal-box">
        <img id="mImg" src="">
        <h2 id="mTitle" style="color: var(--accent); margin: 10px 0;"></h2>
        <p id="mDesc" style="font-size: 14px; color: #cbd5e1; line-height: 1.7;"></p>
        <div id="mPrice" style="font-size: 28px; font-weight: 900; margin: 20px 0;"></div>
        <div id="orderLinkArea"></div>
        <button onclick="closeM()" style="background:none; border:none; color:white; margin-top:20px; cursor:pointer; opacity:0.5; font-size: 13px;">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªÙØ§ØµÙŠÙ„</button>
    </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
    const firebaseConfig = { apiKey: "AIzaSyCnzm7b0mEiszDck9d_KvOfVMN2WguQs8w", authDomain: "o-cell-8bd7f.firebaseapp.com", projectId: "o-cell-8bd7f", storageBucket: "o-cell-8bd7f.firebasestorage.app", messagingSenderId: "123702658364", appId: "1:123702658364:web:f51ca179843af7bab24a39" };
    const db = getFirestore(initializeApp(firebaseConfig));
    const PHONE = "96178961175";

    async function loadData() {
        const snap = await getDocs(collection(db, "categories"));
        const grid = document.getElementById('categoryGrid');
        snap.forEach(d => {
            const c = d.data();
            grid.innerHTML += `<div class="card" onclick="openCat('${c.name}')"><img src="${c.image}"><div class="card-info"><h3>${c.name}</h3></div></div>`;
        });
    }

    window.openCat = async (n) => {
        document.getElementById('home-screen').style.display = "none";
        document.getElementById('product-screen').style.display = "block";
        const grid = document.getElementById('productGrid'); grid.innerHTML = "<p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø©...</p>";
        const snap = await getDocs(collection(db, "products")); grid.innerHTML = "";
        snap.forEach(d => {
            const p = d.data();
            if(p.category === n) {
                grid.innerHTML += `<div class="card" onclick="openM('${p.name}','${p.image}','${p.description}','${p.price}', ${p.inStock})">
                    ${!p.inStock ? '<div class="sold-out-badge">Ù†ÙØ° Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</div>' : ''}
                    <img src="${p.image}"><div class="card-info"><h3>${p.name}</h3><div class="price-tag">$${p.price}</div></div></div>`;
            }
        });
    };

    window.openM = (n, i, d, p, s) => {
        document.getElementById('mImg').src = i; document.getElementById('mTitle').innerText = n;
        document.getElementById('mDesc').innerText = d; document.getElementById('mPrice').innerText = "$" + p;
        const link = `https://wa.me/${PHONE}?text=${encodeURIComponent('Ø£ÙˆØ¯ Ø·Ù„Ø¨: '+n+' - Ø§Ù„Ø³Ø¹Ø±: $'+p)}`;
        document.getElementById('orderLinkArea').innerHTML = s ? 
            `<a href="${link}" class="order-wa-btn">Order Now <i class="fab fa-whatsapp"></i></a>` : 
            `<div class="order-wa-btn disabled-btn">Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù†ÙØ° Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</div>`;
        document.getElementById('modal').style.display = "flex";
    };

    window.closeM = () => document.getElementById('modal').style.display = "none";
    window.goBack = () => { document.getElementById('home-screen').style.display = "block"; document.getElementById('product-screen').style.display = "none"; };
    loadData();
</script>
</body>
</html>
